#    By: jle-goff <jle-goff@student.42.fr>          +#+  +:+       +#+         #
#    Updated: 2024/05/01 17:50:01 by jle-goff         ###   ########.fr        #
FLAGS = -Wall -Wextra -Werror -g #-fsanitize=address #-static-libsan
#ASAN_OPTIONS=symbolize=1
#ASAN_SYMBOLIZER_PATH=$(shell which llvm-symbolizer)
SRCS = 	main.c free.c free2.c lexer/lexer.c lexer/lexer_lst_utils.c lexer/quotes.c\
		lexer/expansion.c parser/connect_tree.c parser/parser.c parser/ast_helper.c\
		parser/command.c parser/command_production.c print_branch.c\
		parser/redirections.c parser/print_ast.c exec/child.c exec/exe.c\
		b_ins/env.c b_ins/env_utils.c b_ins/export.c b_ins/echo.c b_ins/pwd.c b_ins/cd.c\
		exec/utils_exec3.c exec/utils_exec4.c exec/cmds.c b_ins/export_utils.c \
		exec/heredoc_expansion.c b_ins/export_sort.c exec/utils_exec5.c\
		signals/sig_heredoc.c lexer/expansion_utils.c\
OBJS = $(SRCS:.c=.o)
#version for my mac
#LIB_DIR = -L /usr/local/opt/readline/lib
#version for my mac
#	@$(CC) $(FLAGS) $(OBJS) $(LIBFT_A) -o  $(@) $(LIB) -lreadline $(LIB_DIR)
#-I /usr/local/opt/readline/include
	@$(CC) $(FLAGS) $(OBJS) $(LIBFT_A) -o $(@) $(LIB)
	@$(MAKE) --no-print-directory -C $(LIBFT_DIR)
	@$(MAKE) --no-print-directory -C $(LIBFT_DIR)
	@$(MAKE) --no-print-directory -C $(LIBFT_DIR) fclean
#valgrind --suppressions=readline.supp --leak-check=full --show-leak-kinds=all --track-origins=yes  ./minishell
